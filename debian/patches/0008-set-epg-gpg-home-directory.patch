From: Sean Whitton <spwhitton@spwhitton.name>
Date: Sat, 27 Feb 2016 11:35:48 -0700
Subject: set epg-gpg-home-directory
Forwarded: https://github.com/flycheck/flycheck/pull/891

gpg immediately dies with an error when invoked if the current user's
home directory does not exist (as is the case on a Debian package
autobuilder).  This causes all tests that invoke gpg to be skipped.
Setting `epg-gpg-home-directory` when running the test suite fixes the
problem, making the test suite more portable.
---
 test/run.el | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

--- a/test/run.el
+++ b/test/run.el
@@ -127,7 +127,8 @@ Node `(ert)Test Selectors' for informati
       (load (expand-file-name "flycheck-test"
                               (file-name-directory flycheck-runner-file)))))
 
-  (let ((debug-on-error t))
+  (let ((debug-on-error t)
+        (epg-gpg-home-directory "/tmp"))
     (flycheck-run-tests-batch-and-exit)))
 
 ;;; run.el ends here
